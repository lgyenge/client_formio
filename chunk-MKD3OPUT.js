import{a as at}from"./chunk-3IZQUZ5Y.js";import{b as nt}from"./chunk-EBPMJSX6.js";import{b as rt}from"./chunk-RYFXDC4W.js";import{a as st}from"./chunk-UIZ74LUX.js";import{Ba as Ce,Ca as De,D as fe,Db as xe,E as ve,G as ge,J as $e,K as we,O as Ee,Oa as ze,P as Ie,Pa as Ve,Pb as it,Y as ue,Ya as Ze,Z as he,Za as Ye,ab as Xe,bb as et,d as ht,db as Pe,e as dt,eb as tt,fa as ke,ha as be,k as We,ka as de,la as me,na as Ge,oa as Je,ob as Me,p as Ke,qa as Re,ra as Te,sa as Le,v as Qe,xa as Ae,ya as qe,za as Fe}from"./chunk-ICJVGW3A.js";var ot=ht((Ue,He)=>{"use strict";(function(m,s){typeof define=="function"&&define.amd?define([],s):typeof He=="object"&&typeof Ue<"u"?He.exports=s():m.Papa=s()})(Ue,function m(){"use strict";var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},H=!s.document&&!!s.postMessage,r=s.IS_PAPA_WORKER||!1,o={},d=0,l={parse:function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(_(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!_(e.transform)&&e.transform,e.worker&&l.WORKERS_SUPPORTED){var n=function(){if(!l.WORKERS_SUPPORTED)return!1;var h=(D=s.URL||s.webkitURL||null,O=m.toString(),l.BLOB_URL||(l.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))),g=new s.Worker(h),D,O;return g.onmessage=J,g.id=d++,o[g.id]=g}();return n.userStep=e.step,n.userChunk=e.chunk,n.userComplete=e.complete,n.userError=e.error,e.step=_(e.step),e.chunk=_(e.chunk),e.complete=_(e.complete),e.error=_(e.error),delete e.worker,void n.postMessage({input:t,config:e,workerId:n.id})}var u=null;return l.NODE_STREAM_INPUT,typeof t=="string"?(t=function(h){return h.charCodeAt(0)===65279?h.slice(1):h}(t),u=e.download?new X(e):new ne(e)):t.readable===!0&&_(t.read)&&_(t.on)?u=new pe(e):(s.File&&t instanceof File||t instanceof Object)&&(u=new re(e)),u.stream(t)},unparse:function(t,e){var i=!1,n=!0,u=",",h=`\r
`,g='"',D=g+g,O=!1,p=null,E=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(a){return e.delimiter.indexOf(a)!==-1}).length||(u=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(O=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(g=e.quoteChar),typeof e.header=="boolean"&&(n=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");p=e.columns}e.escapeChar!==void 0&&(D=e.escapeChar+g),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(E=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var f=new RegExp(F(g),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return Q(null,t,O);if(typeof t[0]=="object")return Q(p||Object.keys(t[0]),t,O)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||p),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),Q(t.fields||[],t.data||[],O);throw new Error("Unable to serialize unrecognized input");function Q(a,k,P){var S="";typeof a=="string"&&(a=JSON.parse(a)),typeof k=="string"&&(k=JSON.parse(k));var z=Array.isArray(a)&&0<a.length,A=!Array.isArray(k[0]);if(z&&n){for(var q=0;q<a.length;q++)0<q&&(S+=u),S+=V(a[q],q);0<k.length&&(S+=h)}for(var c=0;c<k.length;c++){var b=z?a.length:k[c].length,C=!1,L=z?Object.keys(k[c]).length===0:k[c].length===0;if(P&&!z&&(C=P==="greedy"?k[c].join("").trim()==="":k[c].length===1&&k[c][0].length===0),P==="greedy"&&z){for(var v=[],M=0;M<b;M++){var I=A?a[M]:M;v.push(k[c][I])}C=v.join("").trim()===""}if(!C){for(var w=0;w<b;w++){0<w&&!L&&(S+=u);var $=z&&A?a[w]:w;S+=V(k[c][$],w)}c<k.length-1&&(!P||0<b&&!L)&&(S+=h)}}return S}function V(a,k){if(a==null)return"";if(a.constructor===Date)return JSON.stringify(a).slice(1,25);var P=!1;E&&typeof a=="string"&&E.test(a)&&(a="'"+a,P=!0);var S=a.toString().replace(f,D);return(P=P||i===!0||typeof i=="function"&&i(a,k)||Array.isArray(i)&&i[k]||function(z,A){for(var q=0;q<A.length;q++)if(-1<z.indexOf(A[q]))return!0;return!1}(S,l.BAD_DELIMITERS)||-1<S.indexOf(u)||S.charAt(0)===" "||S.charAt(S.length-1)===" ")?g+S+g:S}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!H&&!!s.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=ae,l.ParserHandle=R,l.NetworkStreamer=X,l.FileStreamer=re,l.StringStreamer=ne,l.ReadableStreamStreamer=pe,s.jQuery){var j=s.jQuery;j.fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(h){if(!(j(this).prop("tagName").toUpperCase()==="INPUT"&&j(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var g=0;g<this.files.length;g++)i.push({file:this.files[g],inputElem:this,instanceConfig:j.extend({},e)})}),n(),this;function n(){if(i.length!==0){var h,g,D,O,p=i[0];if(_(t.before)){var E=t.before(p.file,p.inputElem);if(typeof E=="object"){if(E.action==="abort")return h="AbortError",g=p.file,D=p.inputElem,O=E.reason,void(_(t.error)&&t.error({name:h},g,D,O));if(E.action==="skip")return void u();typeof E.config=="object"&&(p.instanceConfig=j.extend(p.instanceConfig,E.config))}else if(E==="skip")return void u()}var f=p.instanceConfig.complete;p.instanceConfig.complete=function(Q){_(f)&&f(Q,p.file,p.inputElem),u()},l.parse(p.file,p.instanceConfig)}else _(t.complete)&&t.complete()}function u(){i.splice(0,1),n()}}}function U(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=Oe(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new R(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(e);n!==void 0&&(e=n)}this.isFirstChunk=!1,this._halted=!1;var u=this._partialLine+e;this._partialLine="";var h=this._handle.parse(u,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var g=h.meta.cursor;this._finished||(this._partialLine=u.substring(g-this._baseIndex),this._baseIndex=g),h&&h.data&&(this._rowCount+=h.data.length);var D=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)s.postMessage({results:h,workerId:l.WORKER_ID,finished:D});else if(_(this._config.chunk)&&!i){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!D||!_(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):r&&this._config.error&&s.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function X(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),U.call(this,t),this._nextChunk=H?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),H||(e.onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!H),this._config.downloadRequestHeaders){var i=this._config.downloadRequestHeaders;for(var n in i)e.setRequestHeader(n,i[n])}if(this._config.chunkSize){var u=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+u)}try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}H&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(i){var n=i.getResponseHeader("Content-Range");return n===null?-1:parseInt(n.substring(n.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){var n=e.statusText||i;this._sendError(new Error(n))}}function re(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),U.call(this,t);var n=typeof FileReader<"u";this.stream=function(u){this._input=u,i=u.slice||u.webkitSlice||u.mozSlice,n?((e=new FileReader).onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);u=i.call(u,this._start,h)}var g=e.readAsText(u,this._config.encoding);n||this._chunkLoaded({target:{result:g}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(e.error)}}function ne(t){var e;U.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var i,n=this._config.chunkSize;return n?(i=e.substring(0,n),e=e.substring(n)):(i=e,e=""),this._finished=!e,this.parseChunk(i)}}}function pe(t){U.call(this,t=t||{});var e=[],i=!0,n=!1;this.pause=function(){U.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){U.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=ee(function(u){try{e.push(typeof u=="string"?u:u.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=ee(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=ee(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(t){var e,i,n,u=Math.pow(2,53),h=-u,g=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,D=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,p=0,E=0,f=!1,Q=!1,V=[],a={data:[],errors:[],meta:{}};if(_(t.step)){var k=t.step;t.step=function(c){if(a=c,z())S();else{if(S(),a.data.length===0)return;p+=c.data.length,t.preview&&p>t.preview?i.abort():(a.data=a.data[0],k(a,O))}}}function P(c){return t.skipEmptyLines==="greedy"?c.join("").trim()==="":c.length===1&&c[0].length===0}function S(){return a&&n&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines&&(a.data=a.data.filter(function(c){return!P(c)})),z()&&function(){if(!a)return;function c(C,L){_(t.transformHeader)&&(C=t.transformHeader(C,L)),V.push(C)}if(Array.isArray(a.data[0])){for(var b=0;z()&&b<a.data.length;b++)a.data[b].forEach(c);a.data.splice(0,1)}else a.data.forEach(c)}(),function(){if(!a||!t.header&&!t.dynamicTyping&&!t.transform)return a;function c(C,L){var v,M=t.header?{}:[];for(v=0;v<C.length;v++){var I=v,w=C[v];t.header&&(I=v>=V.length?"__parsed_extra":V[v]),t.transform&&(w=t.transform(w,I)),w=A(I,w),I==="__parsed_extra"?(M[I]=M[I]||[],M[I].push(w)):M[I]=w}return t.header&&(v>V.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+v,E+L):v<V.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+v,E+L)),M}var b=1;return!a.data.length||Array.isArray(a.data[0])?(a.data=a.data.map(c),b=a.data.length):a.data=c(a.data,0),t.header&&a.meta&&(a.meta.fields=V),E+=b,a}()}function z(){return t.header&&V.length===0}function A(c,b){return C=c,t.dynamicTypingFunction&&t.dynamicTyping[C]===void 0&&(t.dynamicTyping[C]=t.dynamicTypingFunction(C)),(t.dynamicTyping[C]||t.dynamicTyping)===!0?b==="true"||b==="TRUE"||b!=="false"&&b!=="FALSE"&&(function(L){if(g.test(L)){var v=parseFloat(L);if(h<v&&v<u)return!0}return!1}(b)?parseFloat(b):D.test(b)?new Date(b):b===""?null:b):b;var C}function q(c,b,C,L){var v={type:c,code:b,message:C};L!==void 0&&(v.row=L),a.errors.push(v)}this.parse=function(c,b,C){var L=t.quoteChar||'"';if(t.newline||(t.newline=function(I,w){I=I.substring(0,1048576);var $=new RegExp(F(w)+"([^]*?)"+F(w),"gm"),N=(I=I.replace($,"")).split("\r"),G=I.split(`
`),Z=1<G.length&&G[0].length<N[0].length;if(N.length===1||Z)return`
`;for(var B=0,x=0;x<N.length;x++)N[x][0]===`
`&&B++;return B>=N.length/2?`\r
`:"\r"}(c,L)),n=!1,t.delimiter)_(t.delimiter)&&(t.delimiter=t.delimiter(c),a.meta.delimiter=t.delimiter);else{var v=function(I,w,$,N,G){var Z,B,x,T;G=G||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var oe=0;oe<G.length;oe++){var y=G[oe],ce=0,Y=0,le=0;x=void 0;for(var te=new ae({comments:N,delimiter:y,newline:w,preview:10}).parse(I),ie=0;ie<te.data.length;ie++)if($&&P(te.data[ie]))le++;else{var se=te.data[ie].length;Y+=se,x!==void 0?0<se&&(ce+=Math.abs(se-x),x=se):x=se}0<te.data.length&&(Y/=te.data.length-le),(B===void 0||ce<=B)&&(T===void 0||T<Y)&&1.99<Y&&(B=ce,Z=y,T=Y)}return{successful:!!(t.delimiter=Z),bestDelimiter:Z}}(c,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);v.successful?t.delimiter=v.bestDelimiter:(n=!0,t.delimiter=l.DefaultDelimiter),a.meta.delimiter=t.delimiter}var M=Oe(t);return t.preview&&t.header&&M.preview++,e=c,i=new ae(M),a=i.parse(e,b,C),S(),f?{meta:{paused:!0}}:a||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,i.abort(),e=_(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){O.streamer._halted?(f=!1,O.streamer.parseChunk(e,!0)):setTimeout(O.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,i.abort(),a.meta.aborted=!0,_(t.complete)&&t.complete(a),e=""}}function F(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ae(t){var e,i=(t=t||{}).delimiter,n=t.newline,u=t.comments,h=t.step,g=t.preview,D=t.fastMode,O=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(O=t.escapeChar),(typeof i!="string"||-1<l.BAD_DELIMITERS.indexOf(i))&&(i=","),u===i)throw new Error("Comment character same as delimiter");u===!0?u="#":(typeof u!="string"||-1<l.BAD_DELIMITERS.indexOf(u))&&(u=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var p=0,E=!1;this.parse=function(f,Q,V){if(typeof f!="string")throw new Error("Input must be a string");var a=f.length,k=i.length,P=n.length,S=u.length,z=_(h),A=[],q=[],c=[],b=p=0;if(!f)return W();if(t.header&&!Q){var C=f.split(n)[0].split(i),L=[],v={},M=!1;for(var I in C){var w=C[I];_(t.transformHeader)&&(w=t.transformHeader(w,I));var $=w,N=v[w]||0;for(0<N&&(M=!0,$=w+"_"+N),v[w]=N+1;L.includes($);)$=$+"_"+N;L.push($)}if(M){var G=f.split(n);G[0]=L.join(i),f=G.join(n)}}if(D||D!==!1&&f.indexOf(e)===-1){for(var Z=f.split(n),B=0;B<Z.length;B++){if(c=Z[B],p+=c.length,B!==Z.length-1)p+=n.length;else if(V)return W();if(!u||c.substring(0,S)!==u){if(z){if(A=[],le(c.split(i)),_e(),E)return W()}else le(c.split(i));if(g&&g<=B)return A=A.slice(0,g),W(!0)}}return W()}for(var x=f.indexOf(i,p),T=f.indexOf(n,p),oe=new RegExp(F(O)+F(e),"g"),y=f.indexOf(e,p);;)if(f[p]!==e)if(u&&c.length===0&&f.substring(p,p+S)===u){if(T===-1)return W();p=T+P,T=f.indexOf(n,p),x=f.indexOf(i,p)}else if(x!==-1&&(x<T||T===-1))c.push(f.substring(p,x)),p=x+k,x=f.indexOf(i,p);else{if(T===-1)break;if(c.push(f.substring(p,T)),se(T+P),z&&(_e(),E))return W();if(g&&A.length>=g)return W(!0)}else for(y=p,p++;;){if((y=f.indexOf(e,y+1))===-1)return V||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:p}),ie();if(y===a-1)return ie(f.substring(p,y).replace(oe,e));if(e!==O||f[y+1]!==O){if(e===O||y===0||f[y-1]!==O){x!==-1&&x<y+1&&(x=f.indexOf(i,y+1)),T!==-1&&T<y+1&&(T=f.indexOf(n,y+1));var ce=te(T===-1?x:Math.min(x,T));if(f.substr(y+1+ce,k)===i){c.push(f.substring(p,y).replace(oe,e)),f[p=y+1+ce+k]!==e&&(y=f.indexOf(e,p)),x=f.indexOf(i,p),T=f.indexOf(n,p);break}var Y=te(T);if(f.substring(y+1+Y,y+1+Y+P)===n){if(c.push(f.substring(p,y).replace(oe,e)),se(y+1+Y+P),x=f.indexOf(i,p),y=f.indexOf(e,p),z&&(_e(),E))return W();if(g&&A.length>=g)return W(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:p}),y++}}else y++}return ie();function le(K){A.push(K),b=p}function te(K){var Be=0;if(K!==-1){var Se=f.substring(y+1,K);Se&&Se.trim()===""&&(Be=Se.length)}return Be}function ie(K){return V||(K===void 0&&(K=f.substring(p)),c.push(K),p=a,le(c),z&&_e()),W()}function se(K){p=K,le(c),c=[],T=f.indexOf(n,p)}function W(K){return{data:A,errors:q,meta:{delimiter:i,linebreak:n,aborted:E,truncated:!!K,cursor:b+(Q||0)}}}function _e(){h(W()),A=[],q=[]}},this.abort=function(){E=!0},this.getCharIndex=function(){return p}}function J(t){var e=t.data,i=o[e.workerId],n=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var u={abort:function(){n=!0,je(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Ne,resume:Ne};if(_(i.userStep)){for(var h=0;h<e.results.data.length&&(i.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},u),!n);h++);delete e.results}else _(i.userChunk)&&(i.userChunk(e.results,u,e.file),delete e.results)}e.finished&&!n&&je(e.workerId,e.results)}function je(t,e){var i=o[t];_(i.userComplete)&&i.userComplete(e),i.terminate(),delete o[t]}function Ne(){throw new Error("Not implemented.")}function Oe(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=Oe(t[i]);return e}function ee(t,e){return function(){t.apply(e,arguments)}}function _(t){return typeof t=="function"}return r&&(s.onmessage=function(t){var e=t.data;if(l.WORKER_ID===void 0&&e&&(l.WORKER_ID=e.workerId),typeof e.input=="string")s.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0});else if(s.File&&e.input instanceof File||e.input instanceof Object){var i=l.parse(e.input,e.config);i&&s.postMessage({workerId:l.WORKER_ID,results:i,finished:!0})}}),(X.prototype=Object.create(U.prototype)).constructor=X,(re.prototype=Object.create(U.prototype)).constructor=re,(ne.prototype=Object.create(ne.prototype)).constructor=ne,(pe.prototype=Object.create(U.prototype)).constructor=pe,l})});var mt=dt(ot(),1),lt=(()=>{let s=class s{constructor(){this._papa=mt}parse(r,o){return this._papa.parse(r,o)}unparse(r,o){return this._papa.unparse(r,o)}setLocalChunkSize(r){this._papa.LocalChunkSize=r}setRemoteChunkSize(r){this._papa.RemoteChunkSize=r}setDefaultDelimiter(r){this._papa.DefaultDelimiter=r}get badDelimiters(){return this._papa.BAD_DELIMITERS}get recordSeparator(){return this._papa.RECORD_SEP}get unitSeparator(){return this._papa.UNIT_SEP}get workersSupported(){return this._papa.WORKERS_SUPPORTED}};s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=fe({token:s,factory:s.\u0275fac,providedIn:"root"});let m=s;return m})();var ut=(()=>{let s=class s{constructor(r,o){this.appConfig=r,this.http=o}authentuicate(){let r=this.appConfig.appUrl+"/user/login",o={data:{email:"admin@example.com",password:"CHANGEME"}},d=new Pe({"Content-Type":"application/json"});return this.http.post(r,o,{headers:d})}uploadForm(r){let o=this.appConfig.appUrl+"/form",d=localStorage.getItem("formioToken")||"",l={title:"151-0111-6525-2 (Acetabular Fixation Screw D:6,5 L:25)",name:"151-0111-6525-2",path:"151-0111-6525-2",type:"form",display:"wizard",tags:["csavar","common"],submissionAccess:[{type:"create_all",roles:[]},{type:"read_all",roles:[]},{type:"update_all",roles:[]},{type:"delete_all",roles:[]},{type:"create_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"read_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"update_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"delete_own",roles:["660e4fcbe958c6dc4f0534cb"]}],owner:"660e4fcbe958c6dc4f05350d",components:[{type:"panel",title:"Page 1",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page1Columns",columns:[{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Cikksz\xE1m",key:"page1ColumnsCikkszm",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Sarzs",key:"page1ColumnsSarzs",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Megnevez\xE9s",key:"page1ColumnsMegnevezs",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!0,label:"V\xE9gellen\u0151rz\xE9s (ok/nok)",dataGridLabel:!1,key:"page1Vgellenrzsoknok",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{input:!0,tableView:!0,label:"Signature",key:"page1Signature",placeholder:"",footer:"Al\xE1\xEDr\xE1s",width:"100%",height:"150px",penColor:"black",backgroundColor:"rgb(245,245,235)",minWidth:"0.5",maxWidth:"2.5",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1},type:"signature",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page1",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{type:"panel",title:"Page 2",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page2Columns",columns:[{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD87,688 (+0,05/0)",key:"page2Columns76880050",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD86,5 (0/-0,1)",key:"page2Columns65001",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"SW 3,5 ellen\u0151rz\xE9s",dataGridLabel:!1,key:"page2ColumnsSw35Ellenrzs",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD85,115 (+0,05/0)",key:"page2Columns51150050",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"3 (+/-0,1)",key:"page2Columns301",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Fel\xFClet (szemcseszort)",dataGridLabel:!1,key:"page2ColumnsFelletszemcseszort",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD83 (0/-0,1)",key:"page2Columns3001",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"25 (+/-0,2)",key:"page2Columns2502",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page2",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{type:"panel",title:"Page 3",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page3Columns",columns:[{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Bioburden vizsg\xE1lat (\u226510 CFU)",dataGridLabel:!1,key:"page3ColumnsBioburdenvizsglat10Cfu",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Bakteri\xE1lis endotoxin vizsg\xE1lat (\u226520 EU)",dataGridLabel:!1,key:"page3ColumnsBakterilisendotoxinvizsglat20Eu",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Sterilit\xE1s vizsg\xE1lat (steril/nem steril)",dataGridLabel:!1,key:"page3ColumnsSterilitsvizsglatsterilnemsteril",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Csomagol\xE1s-z\xE1r\xE1s vizsg\xE1lat (ok/nok)",dataGridLabel:!1,key:"page3ColumnsCsomagolsZrsvizsglatoknok",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page3",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"columns",columns:[{components:[],width:4,offset:0,push:0,pull:0},{components:[],width:4,offset:0,push:0,pull:0},{components:[],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,label:"Submit",tableView:!1,key:"submit",size:"md",leftIcon:"",rightIcon:"",block:!1,action:"submit",disableOnInvalid:!1,theme:"primary",type:"button"}]},j=new Pe({"Content-Type":"application/json","x-jwt-token":d});return this.http.post(o,r,{headers:j})}};s.\u0275fac=function(o){return new(o||s)(ge(xe),ge(tt))},s.\u0275prov=fe({token:s,factory:s.\u0275fac,providedIn:"root"});let m=s;return m})();var pt=(()=>{let s=class s{constructor(r){this.bsModalService=r}confirm(r,o,d){let l={title:r,message:o,options:d,answer:""};return this.bsModalRef=this.bsModalService.show(at,{initialState:l}),new We(this.getConfirmSubscriber())}getConfirmSubscriber(){return r=>{let o=this.bsModalService.onHidden.subscribe(d=>{r.next(this.bsModalRef.content.answer),r.complete()});return{unsubscribe(){o.unsubscribe()}}}}};s.\u0275fac=function(o){return new(o||s)(ge(rt))},s.\u0275prov=fe({token:s,factory:s.\u0275fac,providedIn:"root"});let m=s;return m})();var vt=["template"],wt=["csvInput"];function kt(m,s){if(m&1){let H=Re();de(0,"button",6),Te("click",function(){Ee(H);let o=Le();return Ie(o.uploadForm())}),Ce(1," Upload Form "),me()}}function Ct(m,s){if(m&1&&(de(0,"div",1),Ce(1),ze(2,"json"),me()),m&2){let H=s.$implicit;ue(),De(Ve(2,1,H))}}function xt(m,s){if(m&1&&(de(0,"div",1),Ce(1),ze(2,"json"),me()),m&2){let H=s.$implicit;ue(),De(Ve(2,1,H))}}function Ot(m,s){if(m&1&&(Ge(0),ke(1,xt,3,3,"div",4),Je()),m&2){let H=Le();ue(),be("ngForOf",H.error_message)}}var ct=(()=>{let s=class s{constructor(r,o,d,l,j){this.appConfig=r,this.papa=o,this.upload=d,this.auth=l,this.modalMessageService=j,this.file="",this.importedData=[],this.template=null,this.CsvInputVar=null,this.modalRef=null,this.title="",this.message="",this.options=[],this.answers=[],this.error_message=[],this.roles=[],this.accessSetting={type:"read_all",roles:[]},this.accessSubmissionCreateAll={type:"create_all",roles:[]},this.accessSubmissionReadAll={type:"read_all",roles:[]},this.accessSubmissionUpdateAll={type:"update_all",roles:[]},this.accessSubmissionDeleteAll={type:"delete_all",roles:[]},this.accessSubmissionCreateOwn={type:"create_own",roles:[]},this.accessSubmissionReadOwn={type:"read_own",roles:[]},this.accessSubmissionUpdateOwn={type:"update_own",roles:[]},this.accessSubmissionDeleteOwn={type:"delete_own",roles:[]}}ngOnInit(){this.auth.ready.then(()=>{this.roles.push(this.auth.roles.administrator._id),this.roles.push(this.auth.roles.authenticated._id),this.roles.push(this.auth.roles.anonymous._id),this.accessSetting.roles=this.roles,this.accessSubmissionReadAll.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionCreateOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionReadOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionUpdateOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionDeleteOwn.roles.push(this.auth.roles.authenticated._id)})}uploadForm(){this.CsvInputVar&&(this.CsvInputVar.nativeElement.value=""),this.dataList.forEach(r=>{this.formToUpload=this.generateForm(r),this.upload.uploadForm(this.formToUpload).pipe(Qe(o=>(o.status===0?(console.error("An error occurred:",o.error),this.error_message.push(` ${r?.Cikksz\u00E1m} reason: ${o.error} A client-side or network error occurred.`)):(console.error(`Backend returned code ${o.status}, body was: `,o.error),this.error_message.push(` ${r?.Cikksz\u00E1m}  error code: ${o.error.status}, reason: ${o.error.message}`)),Ke(r?.Cikksz\u00E1m+" - upload error")))).subscribe(o=>{})}),this.dataList=[]}confirm(){this.modalMessageService.confirm("Confirmation dialog box",this.message,["Yes","No"]).subscribe(r=>{this.answers.push(r)})}readCsvFromLocal(r){let o=r.srcElement.files;this.parseCsvFile(o[0])}parseCsvFile(r){this.papa.parse(r,{header:!0,dynamicTyping:!0,skipEmptyLines:"greedy",worker:!0,complete:(o,d)=>{this.papaParseComplete(o)}})}papaParseComplete(r){this.dataList=r.data}generateForm(r){let o="",d={title:"",display:"form",type:"form",name:"",path:"",tags:["common"],components:[],access:[],submissionAccess:[]},l={type:"button",action:"submit",label:"Submit",theme:"primary"},j={label:"lot",widget:"choicesjs",tableView:!0,dataSrc:"resource",data:{resource:nt.lotId},valueProperty:"data.lot",template:"<span>{{ item.data.lot }}</span>",validateWhenHidden:!1,key:"lot1",type:"select",searchField:"data.lot__regex",filter:"data.inproduction__eq",validate:{required:!0,select:!1},noRefreshOnScroll:!1,addResource:!1,reference:!1,input:!0},U=pe("user");U.customDefaultValue="value = user.data.email;",U.disabled=!0,d.name=r.Cikksz\u00E1m+o,d.title=r.Cikksz\u00E1m+" ("+r.Megnevez\u00E9s+")",d.path=r.Cikksz\u00E1m+o,d.components?.push(U),d.components?.push(j);let X=re("serial","","serial");X.label="serial",X.key="serial",d.components?.push(X);for(let R=0;R<Object.keys(r).length/3;R++)if(r["Tp-"+R]=="n"){let F=re(r["Par-"+R],r["Tr-"+R],R);d.components?.push(F)}else if(r["Tp-"+R]=="b"){let F=ne(r["Par-"+R],r["Tr-"+R],R);d.components?.push(F)}return d.components?.push(l),d.access?.push(this.accessSetting),d.submissionAccess?.push(this.accessSubmissionCreateAll),d.submissionAccess?.push(this.accessSubmissionReadAll),d.submissionAccess?.push(this.accessSubmissionUpdateAll),d.submissionAccess?.push(this.accessSubmissionDeleteAll),d.submissionAccess?.push(this.accessSubmissionCreateOwn),d.submissionAccess?.push(this.accessSubmissionReadOwn),d.submissionAccess?.push(this.accessSubmissionUpdateOwn),d.submissionAccess?.push(this.accessSubmissionDeleteOwn),d;function re(R,F,ae){var J={input:!0,tableView:!0,inputType:"number",inputMask:"",label:"First Name",key:"firstName",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,unique:!1,persistent:!0,validate:{required:!1,minLength:0,maxLength:50,pattern:"",custom:"",customPrivate:!1},conditional:{show:!1,when:"",eq:""},type:"number",tags:[],lockKey:!0,isNew:!1};return J.label=R+"("+F+")",J.key="par"+ae,J}function ne(R,F,ae){var J={label:"Checkbox",tableView:!0,key:"checkbox",type:"checkbox",input:!0};return J.label=R+"("+F+")",J.key="par"+ae,J}function pe(R){var F={type:"textfield",label:"",key:"",input:!0,hidden:!1,disabled:!1,customDefaultValue:""};return F.label=R,F.key=R,F}}};s.\u0275fac=function(o){return new(o||s)(he(xe),he(lt),he(ut),he(it),he(pt))},s.\u0275cmp=$e({type:s,selectors:[["app-upload"]],viewQuery:function(o,d){if(o&1&&(Ae(vt,5),Ae(wt,5)),o&2){let l;qe(l=Fe())&&(d.template=l.first),qe(l=Fe())&&(d.CsvInputVar=l.first)}},decls:7,vars:3,consts:[["csvInput",""],[1,"mt-2","col-md-12"],["type","file","accept",".csv",1,"form-control",3,"change"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","mt-2 col-md-12",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"]],template:function(o,d){if(o&1){let l=Re();de(0,"div",1)(1,"input",2,0),Te("change",function(U){return Ee(l),Ie(d.readCsvFromLocal(U))}),me()(),de(3,"div",1),ke(4,kt,2,0,"button",3),me(),ke(5,Ct,3,3,"div",4)(6,Ot,2,1,"ng-container",5)}o&2&&(ue(4),be("ngIf",d.dataList),ue(),be("ngForOf",d.dataList),ue(),be("ngIf",d.error_message))},dependencies:[Ze,Ye,Xe]});let m=s;return m})();var St=[{path:"",component:ct,canActivate:[st]}],ft=(()=>{let s=class s{};s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=we({type:s}),s.\u0275inj=ve({imports:[Me.forChild(St),Me]});let m=s;return m})();var Wt=(()=>{let s=class s{};s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=we({type:s}),s.\u0275inj=ve({imports:[et,ft]});let m=s;return m})();export{Wt as UploadModule};
