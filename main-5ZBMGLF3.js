import"./chunk-WOE6HJ7L.js";import{a as X,b as Z,c as ee,d as te}from"./chunk-PPMHMCQ7.js";import{a as q}from"./chunk-P3XSIENA.js";import{b as k}from"./chunk-BTW6RH27.js";import{p as Q}from"./chunk-BME5KE2C.js";import{$a as O,Aa as a,Ba as L,D as R,E as b,G as D,H as S,Ib as P,J as f,Jb as W,K as C,Kb as d,O as A,P as H,Wa as E,Y as c,Z as u,ab as Y,bb as V,cb as B,db as G,fa as h,gb as U,ha as p,hb as v,ib as J,jb as $,k as F,ka as r,kb as T,la as n,ma as l,q as _,qa as j,ra as K,sa as g,w as M,z as N,zb as z}from"./chunk-FDGD74HQ.js";var oe=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=f({type:e,selectors:[["app-hero"]],decls:15,vars:0,consts:[[1,"jumbotron","text-center"],[1,"title"],[1,"row"],[1,"col-sm-6","offset-sm-3","text-center"],[1,"lead"],["target","_blank","href","https://gxpdocs.hu",1,"btn","btn-lg","btn-success"],["target","_blank","href","http://help.form.io",1,"btn","btn-lg","btn-success"]],template:function(i,m){i&1&&(r(0,"div",0)(1,"h2",1),a(2,"Dinet Data Logger"),n(),r(3,"div",2)(4,"div",3)(5,"p",4),a(6," This is a Data Registration application using the Form.io Platform. "),n(),r(7,"p",4),a(8," With this application You can easily collect, store, and analize your data. "),n(),r(9,"p",4),a(10,"Need Help?"),n(),r(11,"a",5),a(12,"Dinet Kft"),n(),r(13,"a",6),a(14,"Documentation"),n()()()())}});let t=e;return t})();function ue(t,e){if(t&1&&(r(0,"h3"),a(1,"You are logged in as "),r(2,"strong"),a(3),n(),a(4,"!"),n()),t&2){let s=g(2);c(3),L(s.auth.user.data.email)}}function fe(t,e){if(t&1&&(r(0,"div",2),h(1,ue,5,1,"h3",3),n()),t&2){let s=g();c(),p("ngIf",s.auth.user.data)}}var w=(()=>{let e=class e{constructor(o){this.auth=o}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(u(d))},e.\u0275cmp=f({type:e,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"mt-4","col-md-12","container"],["class","well text-center",4,"ngIf"],[1,"well","text-center"],[4,"ngIf"]],template:function(i,m){i&1&&(l(0,"app-hero"),r(1,"div",0),h(2,fe,2,1,"div",1),n()),i&2&&(c(2),p("ngIf",m.auth.authenticated))},dependencies:[E,oe]});let t=e;return t})();var y=(t,e)=>{let s=S(d),o=S(v);return!!s.is.administrator};var he=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:w},{path:"auth",loadChildren:()=>import("./chunk-S6DCHVIK.js").then(t=>t.AuthModule)},{path:"form",loadChildren:()=>import("./chunk-2BB2MEKS.js").then(t=>t.FormModule),canActivate:[y]},{path:"meo",loadChildren:()=>import("./chunk-2F6UNHYT.js").then(t=>t.MeoModule),canActivate:[q]},{path:"upload",loadChildren:()=>import("./chunk-TGMHHGLE.js").then(t=>t.UploadModule),canActivate:[y]},{path:"create-resource",loadChildren:()=>import("./chunk-JLHLN3Q2.js").then(t=>t.CreateResourceModule),canActivate:[y]},{path:"**",component:w}],ne=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=C({type:e}),e.\u0275inj=b({imports:[T.forRoot(he),T]});let t=e;return t})();var re={appUrl:"https://trai.dimeb.hu",apiUrl:"https://trai.dimeb.hu",icons:"fontawesome"},ae={login:{form:"user/login"},register:{form:"user/register"}};function ve(t,e){t&1&&(r(0,"li")(1,"a",20),l(2,"i",19),a(3," Forms"),n()())}function xe(t,e){t&1&&(r(0,"li")(1,"a",21),l(2,"i",19),a(3," Upload Form"),n()())}function _e(t,e){t&1&&(r(0,"li")(1,"a",22),l(2,"i",19),a(3," Create Resource "),n()())}function be(t,e){if(t&1&&(r(0,"li",14)(1,"button",15),a(2," Select "),n(),r(3,"ul",16),h(4,ve,4,0,"li",17),r(5,"li")(6,"a",18),l(7,"i",19),a(8," Meo"),n()(),h(9,xe,4,0,"li",17)(10,_e,4,0,"li",17),n()()),t&2){let s=g();c(4),p("ngIf",s.auth.is.administrator),c(5),p("ngIf",s.auth.is.administrator),c(),p("ngIf",s.auth.is.administrator)}}function Ce(t,e){t&1&&(r(0,"li",8)(1,"a",23),a(2,"Login | Register"),n()())}function Ee(t,e){if(t&1){let s=j();r(0,"li",24)(1,"a",25),K("click",function(){A(s);let i=g();return H(i.logout())}),l(2,"span",26),a(3," Logout"),n()()}}var me=(()=>{let e=class e{logout(){localStorage.removeItem("user"),localStorage.removeItem("token"),this.auth.logout()}toggle_meo(o){this.router.navigate(["/","meo"])}toggle_form(o){this.router.navigate(["/","form"])}toggle_sheet(o){this.router.navigate(["/","sheet"])}constructor(o,i){this.auth=o,this.router=i}};e.\u0275fac=function(i){return new(i||e)(u(d),u(v))},e.\u0275cmp=f({type:e,selectors:[["app-header"]],decls:16,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/dinetlogo-2-100.jpg",1,"logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDarkDropdown","aria-controls","navbarNavDarkDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDarkDropdown",1,"collapse","navbar-collapse"],[1,"nav","navbar-nav","ml-auto"],["routerLinkActive","active",1,"nav-item"],["routerLink","home",1,"nav-link"],[1,"fa","fa-home"],["class","nav-item dropdown",4,"ngIf"],["class","nav-item","routerLinkActive","active",4,"ngIf"],["class","nav-item",4,"ngIf"],[1,"nav-item","dropdown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-dark","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-dark"],[4,"ngIf"],["href","#","routerLink","meo",1,"dropdown-item"],[1,"fa","fa-wpforms"],["href","#","routerLink","form",1,"dropdown-item"],["href","#","routerLink","upload",1,"dropdown-item"],["href","#","routerLink","create-resource",1,"dropdown-item"],["routerLink","auth",1,"nav-link"],[1,"nav-item"],["routerLink","home",1,"nav-link",3,"click"],[1,"glyphicon","glyphicon-off"]],template:function(i,m){i&1&&(r(0,"nav",0)(1,"div",1)(2,"a",2),l(3,"img",3),n(),r(4,"button",4),l(5,"span",5),n(),r(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),l(10,"i",10),a(11,"Home"),n()(),h(12,be,11,3,"li",11),n(),r(13,"ul",7),h(14,Ce,3,0,"li",12)(15,Ee,4,0,"li",13),n()()()()),i&2&&(c(12),p("ngIf",m.auth.authenticated),c(2),p("ngIf",!m.auth.authenticated),c(),p("ngIf",m.auth.authenticated))},dependencies:[E,J,$]});let t=e;return t})();var le=(()=>{let e=class e{constructor(o){this.http=o,this.TOKEN_KEY="auth_token",this.REFRESH_TOKEN_KEY="refresh_token"}getAccessToken(){return localStorage.getItem(this.TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setAccessToken(o){localStorage.setItem(this.TOKEN_KEY,o)}setRefreshToken(o){localStorage.setItem(this.REFRESH_TOKEN_KEY,o)}clearTokens(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}isTokenExpired(){let o=this.getAccessToken();if(!o)return!0;try{let i=JSON.parse(atob(o.split(".")[1])),m=Math.floor(Date.now()/1e3);return i.exp<m}catch{return!0}}refreshToken(){let o=this.getRefreshToken();if(!o)return _(()=>new Error("No refresh token available"));let i=new O({"Content-Type":"application/json"});return this.http.post("/api/refresh-token",{refreshToken:o},{headers:i}).pipe(M(m=>(this.clearTokens(),_(()=>m))),N(m=>(this.setAccessToken(m.accessToken),new F(I=>{I.next(m.accessToken),I.complete()}))))}handleHttpError(o){return o.status===401&&this.getRefreshToken()?this.refreshToken():(this.clearTokens(),_(()=>o))}};e.\u0275fac=function(i){return new(i||e)(D(Y))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var se=(()=>{let e=class e{constructor(o,i,m){this.auth=o,this.router=i,this.resources=m,this.title="client_formio",this.auth.onLogin.subscribe(()=>{this.router.navigate(["/home"])}),this.auth.onLogout.subscribe(()=>{this.router.navigate(["/auth/login"])}),this.auth.onRegister.subscribe(()=>{this.router.navigate(["/home"])})}};e.\u0275fac=function(i){return new(i||e)(u(d),u(v),u(k))},e.\u0275cmp=f({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","main",1,"container"]],template:function(i,m){i&1&&(l(0,"app-header"),r(1,"div",0),l(2,"router-outlet"),n())},dependencies:[U,me]});let t=e;return t})();var ce=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=C({type:e,bootstrap:[se]}),e.\u0275inj=b({providers:[X,k,d,te,le,{provide:ee,useValue:{tag:"common",includeSearch:!0}},{provide:W,useValue:ae},{provide:z,useValue:re}],imports:[G,P,Q,ne,V,Z.forRoot()]});let t=e;return t})();B().bootstrapModule(ce).catch(t=>console.error(t));
