import{b as Ie,c as Me}from"./chunk-RYFXDC4W.js";import{a as be,b as ye,d as Ce,h as re,i as ne,k as we,m as Se,n as xe,o as U,p as Fe}from"./chunk-UNB647CC.js";import{Aa as J,Ab as Be,Ba as u,Bb as ze,Cb as We,D as Y,Db as ee,E as ae,G as O,Gb as te,Hb as N,J as b,Jb as R,K as ce,Ka as H,Kb as G,Lb as L,Mb as _e,O as h,P as g,Pb as ie,Q as le,Qa as de,T as q,Ta as fe,W as me,Xa as pe,Y as v,Z as a,Za as I,a as B,bb as he,d as z,e as W,ea as ue,fa as _,ha as l,jb as y,ka as s,kb as K,la as o,lb as x,ma as m,mb as X,nb as Z,ob as ge,pb as Pe,qa as S,qb as ve,ra as f,sa as p,sb as Oe,wb as qe,xa as k,xb as Ne,ya as A,yb as Ge,za as T,zb as $e}from"./chunk-ICJVGW3A.js";var Ae=z((Pt,ke)=>{"use strict";var Ye=qe(),Je=Ge(),He=$e(),Ke=ve(),Xe=Oe(),Ee=Ne(),Ze=Math.min;function et(t,d,e){for(var i=e?He:Je,r=t[0].length,n=t.length,c=n,w=Array(n),$=1/0,Q=[];c--;){var F=t[c];c&&d&&(F=Ke(F,Xe(d))),$=Ze(F.length,$),w[c]=!e&&(d||r>=120&&F.length>=120)?new Ye(c&&F):void 0}F=t[0];var oe=-1,P=w[0];e:for(;++oe<r&&Q.length<$;){var E=F[oe],j=d?d(E):E;if(E=e||E!==0?E:0,!(P?Ee(P,j):i(Q,j,e))){for(c=n;--c;){var se=w[c];if(!(se?Ee(se,j):i(t[c],j,e)))continue e}P&&P.push(j),Q.push(E)}}return Q}ke.exports=et});var De=z((Ot,Te)=>{"use strict";var tt=ze();function it(t){return tt(t)?t:[]}Te.exports=it});var je=z((qt,Ve)=>{"use strict";var rt=ve(),nt=Ae(),ot=Be(),st=De(),at=ot(function(t){var d=rt(t,st);return d.length&&d[0]===t[0]?nt(d):[]});Ve.exports=at});var M=W(We(),1),Ue=W(je(),1);var D=W(Pe(),1);var ct=["search"];function lt(t,d){if(t&1){let e=S();s(0,"span",6),f("click",function(){h(e);let r=p(2);return g(r.clearSearch())}),m(1,"span",7),o()}}function mt(t,d){if(t&1){let e=S();s(0,"div",3)(1,"input",4,0),f("keyup",function(){h(e);let r=p();return g(r.onSearch())}),o(),_(3,lt,2,0,"span",5),o()}if(t&2){let e=J(2);v(3),l("ngIf",e&&e!=="")}}function ut(t,d){if(t&1){let e=S();s(0,"formio-grid",8),f("rowAction",function(r){h(e);let n=p();return g(n.onAction(r))})("rowSelect",function(r){h(e);let n=p();return g(n.onSelect(r))})("createItem",function(){h(e);let r=p();return g(r.onCreateItem())}),o()}if(t&2){let e=p();l("formio",e.service.formio)("gridType","form")("query",e.gridQuery)("isActionAllowed",e.service.actionAllowed)}}var dt=["title"],ft=["type"];function pt(t,d){t&1&&m(0,"div",17)}function ht(t,d){if(t&1&&m(0,"form-builder",18,2),t&2){let e=p();l("formbuilder",e.config.builder)("form",e.form)}}function gt(t,d){t&1&&m(0,"div",17)}function vt(t,d){if(t&1&&m(0,"form-builder",18,2),t&2){let e=p();l("formbuilder",e.config.builder)("form",e.form)}}var Re=t=>({active:t});function _t(t,d){if(t&1){let e=S();s(0,"button",12),f("click",function(){h(e);let r=p(),n=J(17);return g(r.openEmbed(n))}),m(1,"em",13),u(2," Share"),o()}}function bt(t,d){t&1&&(s(0,"li",6)(1,"a",14),m(2,"em",15),u(3," Edit Form"),o()())}function yt(t,d){t&1&&(s(0,"li",6)(1,"a",16),m(2,"span",17),o()())}function Ct(t,d){if(t&1&&(s(0,"pre"),m(1,"textarea",31),o()),t&2){let e=p(2);v(),l("ngModel",e.embedCode)}}function wt(t,d){if(t&1&&m(0,"input",32),t&2){let e=p(2);l("ngModel",e.shareUrl)}}function St(t,d){if(t&1){let e=S();s(0,"div",18)(1,"h4",19),u(2,"Share or Embed this form"),o(),s(3,"button",20),f("click",function(){h(e);let r=p();return g(r.modalRef.hide())}),s(4,"span",21),u(5,"\xD7"),o()()(),s(6,"div",22)(7,"ul",23)(8,"li",3)(9,"a",24),f("click",function(){h(e);let r=p();return g(r.choices("isUrl"))}),m(10,"em",25),u(11," URL"),o()(),s(12,"li",3)(13,"a",24),f("click",function(){h(e);let r=p();return g(r.choices("isEmbed"))}),m(14,"em",26),u(15," Embed"),o()()(),_(16,Ct,2,1,"pre",27)(17,wt,1,1,"input",28),o(),s(18,"div",29)(19,"button",30),f("click",function(){h(e);let r=p();return g(r.modalRef.hide())}),u(20,"Close"),o()()}if(t&2){let e=p();v(9),l("ngClass",H(4,Re,e.choice==="isUrl")),v(4),l("ngClass",H(6,Re,e.choice==="isEmbed")),v(3),l("ngIf",e.choice==="isEmbed"),v(),l("ngIf",e.choice==="isUrl")}}function xt(t,d){if(t&1){let e=S();s(0,"formio",1),f("submit",function(r){h(e);let n=p();return g(n.onSubmit(r))}),o()}if(t&2){let e=p();l("renderer",e.config.renderer)("renderOptions",e.renderOptions)("url",e.service.formio.formUrl)("form",e.service.form)("submission",e.submission)("success",e.onSuccess)("submitDone",e.onSubmitDone)("error",e.onError)}}function Ft(t,d){if(t&1&&(s(0,"a",9),m(1,"img",10),o()),t&2){let e=p();l("href",e.downloadUrl,me)}}function It(t,d){t&1&&(s(0,"li",5)(1,"a",11),m(2,"em",12),u(3," Edit"),o()())}function Mt(t,d){t&1&&(s(0,"li",5)(1,"a",13),m(2,"span",14),o()())}var V=(()=>{class t{tag="";includeSearch=!1;saveDraft=!1;type="form";builder;viewer;renderer;static \u0275fac=function(i){return new(i||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),Et=new V,C=(()=>{class t{appConfig;config;auth;formio;access;allAccessMap;ownAccessMap;ready;formReady;actionAllowed;form=null;formSrc="";perms={delete:!1,edit:!1};constructor(e,i,r){this.appConfig=e,this.config=i,this.auth=r,this.appConfig&&this.appConfig.appUrl?(M.Formio.setBaseUrl(this.appConfig.apiUrl),M.Formio.setProjectUrl(this.appConfig.appUrl)):console.error("You must provide an AppConfig within your application!"),this.allAccessMap={update_all:"formEdit",delete_all:"formDelete"},this.ownAccessMap={update_own:"formEdit",delete_own:"formDelete"},this.actionAllowed=n=>this.isActionAllowed(n),this.reset()}isActionAllowed(e){return this.access[e]}setAccess(){this.access={formCreate:!0,formView:!0,formSubmission:!0,formEdit:!0,formPermission:!0,formDelete:!0,projectSettings:!0,userManagement:!0},this.auth?(this.access={formCreate:!1,formView:!1,formSubmission:!1,formEdit:!1,formPermission:!1,formDelete:!1,projectSettings:!1,userManagement:!1},this.ready=this.auth.ready.then(()=>{let e=this.auth.roles.administrator,i=this.auth.roles.formbuilder,r=this.auth.roles.formadmin;this.auth.user&&this.auth.user.roles&&this.auth.user.roles.forEach(n=>{e._id===n?(this.access.formCreate=!0,this.access.formView=!0,this.access.formSubmission=!0,this.access.formEdit=!0,this.access.formPermission=!0,this.access.formDelete=!0,this.access.projectSettings=!0,this.access.userManagement=!0):(r&&r._id===n&&(this.access.formCreate=this.auth.formAccess.create_all.includes(n),this.access.formEdit=this.auth.formAccess.update_all.includes(n),this.access.formPermission=this.auth.formAccess.update_all.includes(n),this.access.formDelete=this.auth.formAccess.delete_all.includes(n),this.access.formView=this.auth.formAccess.read_all.includes(n),this.access.formSubmission=this.auth.formAccess.read_all.includes(n)),i&&i._id===n&&(this.access.formCreate=this.auth.formAccess.create_all.includes(n),this.access.formEdit=this.auth.formAccess.update_all.includes(n),this.access.formPermission=this.auth.formAccess.update_all.includes(n),this.access.formDelete=this.auth.formAccess.delete_all.includes(n),this.access.formView=this.auth.formAccess.read_all.includes(n)))})})):this.ready=Promise.resolve(!1)}reset(e){e?e.params.subscribe(i=>{i.id?this.formio=new M.Formio(`${this.formio.formsUrl}/${i.id}`):this.reset()}):(this.formio=new M.Formio(this.appConfig.appUrl),this.setAccess())}hasAccess(e){return this.auth.user?!!(0,Ue.default)(e,this.auth.user.roles).length:!1}setForm(e){return this.form=e,this.formSrc=this.appConfig.appUrl+"/"+e.path,e.access&&e.access.forEach(i=>{this.allAccessMap[i.type]&&!this.access[this.allAccessMap[i.type]]&&(this.access[this.allAccessMap[i.type]]=this.hasAccess(i.roles)),this.auth&&this.auth.user&&e._id===this.auth.user._id&&this.ownAccessMap[i.type]&&!this.access[this.ownAccessMap[i.type]]&&(this.access[this.ownAccessMap[i.type]]=this.hasAccess(i.roles))}),e}loadForm(){return this.form=null,this.formReady=this.formio.loadForm().then(e=>this.setForm(e)),this.formReady}setSubmission(e){return new Promise(i=>{e.params.subscribe(r=>{this.formio=new M.Formio(`${this.formio.submissionsUrl}/${r.id}`),i(this.formio)})})}submissionLoaded(e){this.auth.ready.then(()=>{this.formio.userPermissions(this.auth.user,this.form,e).then(i=>{this.perms.delete=i.delete,this.perms.edit=i.edit})})}loadForms(){return this.formio.loadForms({params:{tags:this.config.tag}})}static \u0275fac=function(i){return new(i||t)(O(ee),O(V),O(ie))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),kt=(()=>{class t{service;route;router;config;searchElement;formGrid;gridQuery;onSearch;constructor(e,i,r,n){this.service=e,this.route=i,this.router=r,this.config=n,this.config=B(B({},Et),this.config),this.gridQuery={type:this.config.type,sort:"title"},this.config.tag&&(this.gridQuery.tags=this.config.tag),this.onSearch=(0,D.debounce)(this._onSearch,300)}loadGrid(){this.gridQuery=JSON.parse(localStorage.getItem("query"))||this.gridQuery;let e=+localStorage.getItem("currentPage")||0;this.formGrid.refreshGrid(this.gridQuery).then(()=>this.formGrid.setPage(e-1))}ngOnInit(){this.gridQuery={type:this.config.type,sort:"title"},this.config.tag&&(this.gridQuery.tags=this.config.tag),this.service.reset(),this.service.ready.then(()=>{this.loadGrid(),this.formGrid.footer.pageChanged.subscribe(e=>{localStorage.setItem("currentPage",e.page)})})}ngAfterViewInit(){this.searchElement.nativeElement.value=localStorage.getItem("searchInput")||""}_onSearch(){let e=this.searchElement.nativeElement.value;e.length>0?(this.gridQuery.skip=0,this.gridQuery.title__regex="/"+e+"/i",this.gridQuery.title__regex="/"+e.trim()+"/i"):delete this.gridQuery.title__regex,localStorage.setItem("query",JSON.stringify(this.gridQuery)),localStorage.setItem("searchInput",e),this.formGrid.pageChanged({page:1,itemPerPage:this.gridQuery.limit}),this.formGrid.refreshGrid(this.gridQuery)}clearSearch(){this.gridQuery={type:this.config.type,sort:"title"},this.config.tag&&(this.gridQuery.tags=this.config.tag),localStorage.removeItem("query"),localStorage.removeItem("searchInput"),localStorage.removeItem("currentPage"),this.searchElement?.nativeElement&&(this.searchElement.nativeElement.value=""),this.formGrid.pageChanged({page:1}),this.formGrid.query={},this.formGrid.refreshGrid(this.gridQuery)}onAction(e){this.service.form=null,this.router.navigate([e.row._id,e.action],{relativeTo:this.route})}onSelect(e){this.router.navigate([e._id],{relativeTo:this.route})}onCreateItem(){this.router.navigate(["create"],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(a(C),a(y),a(x),a(V))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(i,r){if(i&1&&(k(ct,5),k(U,5)),i&2){let n;A(n=T())&&(r.searchElement=n.first),A(n=T())&&(r.formGrid=n.first)}},decls:2,vars:2,consts:[["search",""],["role","search","class","input-group mb-3",4,"ngIf"],[3,"formio","gridType","query","isActionAllowed","rowAction","rowSelect","createItem",4,"ngIf"],["role","search",1,"input-group","mb-3"],["type","text","placeholder","Search Forms","aria-label","Search Forms","aria-describedby","button-search",1,"form-control",3,"keyup"],["class","form-clear input-group-addon",3,"click",4,"ngIf"],[1,"form-clear","input-group-addon",3,"click"],[1,"fa","fa-times","bi","bi-x"],[3,"rowAction","rowSelect","createItem","formio","gridType","query","isActionAllowed"]],template:function(i,r){i&1&&_(0,mt,4,1,"div",1)(1,ut,1,4,"formio-grid",2),i&2&&(l("ngIf",r.config.includeSearch),v(),l("ngIf",r.service.ready))},dependencies:[I,U],styles:[".form-clear[_ngcontent-%COMP%]{background:#cecece;border-radius:50%;bottom:8px;color:#0000004d;cursor:pointer;display:flex;justify-content:center;align-items:center;padding-bottom:2px;height:24px;position:absolute;right:10px;top:6px;width:24px;z-index:10}.form-clear[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:16px;font-weight:500}"]})}return t})(),Qe=(()=>{class t{service;router;route;config;ref;alerts;builder;formTitle;formType;form;loading;formReady;editMode;constructor(e,i,r,n,c,w){this.service=e,this.router=i,this.route=r,this.config=n,this.ref=c,this.alerts=w,this.form={components:[]},this.formReady=!1,this.loading=!1,this.editMode=!1}initBuilder(e){return e?(this.loading=!0,this.editMode=!0,this.service.formReady.then(()=>(this.form=this.service.form,this.formTitle.nativeElement.value=this.service.form.title,this.formType.nativeElement.value=this.service.form.display||"form",this.formReady=!0,this.loading=!1,this.ref.detectChanges(),!0)).catch(i=>{this.alerts.setAlert({type:"danger",message:i.message||i}),this.loading=!1,this.ref.detectChanges(),this.formReady=!0})):(this.formReady=!0,Promise.resolve(!0))}ngAfterViewInit(){this.route.url.subscribe(e=>{setTimeout(()=>this.initBuilder(e[0].path==="edit"),0)})}onDisplaySelect(e){this.builder.setDisplay(e.target.value)}saveForm(){return this.loading=!0,this.form=D.default.cloneDeep(this.builder.formio.schema),this.form.title=this.formTitle.nativeElement.value.trim(),this.form.display=this.formType.nativeElement.value,this.config.tag&&(this.form.tags=this.form.tags||[],this.form.tags.push(this.config.tag),this.form.tags=D.default.uniq(this.form.tags)),this.config.type&&(this.form.type=this.config.type),this.form._id||(this.form.name=D.default.camelCase(this.form.title).toLowerCase(),this.form.path=this.form.name),this.service.formio.saveForm(this.form).then(e=>(this.form=this.service.setForm(e),this.loading=!1,this.form)).catch(e=>{if(this.loading=!1,e._id&&e.type)throw e;this.alerts.setAlert({type:"danger",message:e.message||e})})}onSave(){return this.saveForm().then(e=>{this.editMode?this.router.navigate(["../","view"],{relativeTo:this.route}):this.router.navigate(["../",e._id,"view"],{relativeTo:this.route})})}static \u0275fac=function(i){return new(i||t)(a(C),a(x),a(y),a(V),a(fe),a(N))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(i,r){if(i&1&&(k(L,5),k(dt,5),k(ft,5)),i&2){let n;A(n=T())&&(r.builder=n.first),A(n=T())&&(r.formTitle=n.first),A(n=T())&&(r.formType=n.first)}},decls:22,vars:3,consts:[["title",""],["type",""],["builder",""],["class","loader",4,"ngIf"],[1,"form-group","row","mb-2"],[1,"col-sm-8"],["type","text","id","formTitle","placeholder","Enter a Title",1,"form-control"],[1,"col-sm-2"],["id","formSelect",1,"form-control",3,"change"],["value","form"],["value","wizard"],["value","pdf"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"bi","bi-save","me-2"],[3,"alerts"],[3,"formbuilder","form",4,"ngIf"],[1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"loader"],[3,"formbuilder","form"]],template:function(i,r){if(i&1){let n=S();_(0,pt,1,0,"div",3),s(1,"div",4)(2,"div",5),m(3,"input",6,0),o(),s(5,"div",7)(6,"select",8,1),f("change",function(w){return h(n),g(r.onDisplaySelect(w))}),s(8,"option",9),u(9,"Form"),o(),s(10,"option",10),u(11,"Wizard"),o(),s(12,"option",11),u(13,"PDF"),o()()(),s(14,"div",7)(15,"button",12),f("click",function(){return h(n),g(r.onSave())}),m(16,"i",13),u(17,"Save Form"),o()()(),m(18,"formio-alerts",14),_(19,ht,2,2,"form-builder",15),s(20,"button",16),f("click",function(){return h(n),g(r.onSave())}),u(21,"Save Form"),o()}i&2&&(l("ngIf",r.loading),v(18),l("alerts",r.alerts),v(),l("ngIf",r.formReady))},dependencies:[I,L,R,re,ne],encapsulation:2})}return t})(),At=(()=>{class t extends Qe{ngOnInit(){this.service.reset()}static \u0275fac=(()=>{let e;return function(r){return(e||(e=le(t)))(r||t)}})();static \u0275cmp=b({type:t,selectors:[["ng-component"]],features:[ue],decls:22,vars:3,consts:[["title",""],["type",""],["builder",""],["class","loader",4,"ngIf"],[1,"form-group","row","mb-2"],[1,"col-sm-8"],["type","text","id","formTitle","placeholder","Enter a Title",1,"form-control"],[1,"col-sm-2"],["id","formSelect",1,"form-control",3,"change"],["value","form"],["value","wizard"],["value","pdf"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"bi","bi-save","me-2"],[3,"alerts"],[3,"formbuilder","form",4,"ngIf"],[1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"loader"],[3,"formbuilder","form"]],template:function(i,r){if(i&1){let n=S();_(0,gt,1,0,"div",3),s(1,"div",4)(2,"div",5),m(3,"input",6,0),o(),s(5,"div",7)(6,"select",8,1),f("change",function(w){return h(n),g(r.onDisplaySelect(w))}),s(8,"option",9),u(9,"Form"),o(),s(10,"option",10),u(11,"Wizard"),o(),s(12,"option",11),u(13,"PDF"),o()()(),s(14,"div",7)(15,"button",12),f("click",function(){return h(n),g(r.onSave())}),m(16,"i",13),u(17,"Save Form"),o()()(),m(18,"formio-alerts",14),_(19,vt,2,2,"form-builder",15),s(20,"button",16),f("click",function(){return h(n),g(r.onSave())}),u(21,"Save Form"),o()}i&2&&(l("ngIf",r.loading),v(18),l("alerts",r.alerts),v(),l("ngIf",r.formReady))},dependencies:[I,L,R,re,ne],encapsulation:2})}return t})(),Tt=(()=>{class t{service;route;appConfig;options;modalService;choice="isUrl";embedCode;shareUrl;projectId;pathName;goTo="";modalRef;constructor(e,i,r,n,c){this.service=e,this.route=i,this.appConfig=r,this.options=n,this.modalService=c}ngOnInit(){this.service.reset(this.route),this.service.loadForm().then(e=>{this.service.formSrc=this.appConfig.appUrl+"/"+e.path,this.projectId=e.project,this.pathName=e.path,this.getShareUrl()})}getShareUrl(){let e=this.appConfig.appUrl+"/"+this.pathName;return this.shareUrl=`${this.options.viewer}/#/?src=${encodeURIComponent(e)}`,this.shareUrl}openEmbed(e){let i="";this.goTo&&(i+=`if (d && d.formSubmission && d.formSubmission._id) { window.location.href = "${this.goTo}";}`);let r='<script type="text/javascript">';r+="(function a(d, w, u) {",r+='var h = d.getElementsByTagName("head")[0];',r+='var s = d.createElement("script");',r+='s.type = "text/javascript";',r+='s.src = "'+this.options.viewer+'/assets/lib/seamless/seamless.parent.min.js";',r+="s.onload = function b() {",r+='var f = d.getElementById("formio-form-'+this.service.formio.formId+'");',r+="if (!f || (typeof w.seamless === u)) {",r+="return setTimeout(b, 100);",r+="}",r+="w.seamless(f, {fallback:false}).receive(function(d, e) {"+i+"});",r+="};",r+="h.appendChild(s);",r+="})(document, window);",r+="<\/script>",r+='<iframe id="formio-form-'+this.service.formio.formId+'" ',r+='style="width:100%;border:none;" height="800px" src="'+this.shareUrl+'&iframe=1"></iframe>',this.embedCode=r,this.modalRef=this.modalService.show(e,{class:"modal-lg"})}choices(e){this.choice=e}static \u0275fac=function(i){return new(i||t)(a(C),a(y),a(ee),a(V),a(Ie))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:18,vars:3,consts:[["content",""],["class","float-end btn btn-outline-primary",3,"click",4,"ngIf"],[1,"nav","nav-tabs","mb-2"],[1,"nav-item"],["routerLink","../",1,"nav-link"],[1,"fa","fa-chevron-left","bi","bi-chevron-left"],["routerLinkActive","active",1,"nav-item"],["routerLink","view","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-pencil","bi","bi-pencil"],["routerLink","submission","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-list-alt","bi","bi-table"],["class","nav-item","routerLinkActive","active",4,"ngIf"],[1,"float-end","btn","btn-outline-primary",3,"click"],[1,"fa","fa-share-alt","bi","bi-share"],["routerLink","edit","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-edit","bi","bi-pencil-square"],["routerLink","delete","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-trash","bi","bi-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"nav","nav-tabs","mr-auto","mb-2"],[1,"nav-link",3,"click","ngClass"],[1,"fa","fa-link","bi","bi-link"],[1,"fa","fa-code","bi","bi-code-slash"],[4,"ngIf"],["type","text","onclick","this.focus();this.select()","readonly","readonly","class","form-control","placeholder","https://examples.form.io/example",3,"ngModel",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["onclick","this.focus();this.select()","readonly","readonly","rows","8",2,"width","100%",3,"ngModel"],["type","text","onclick","this.focus();this.select()","readonly","readonly","placeholder","https://examples.form.io/example",1,"form-control",3,"ngModel"]],template:function(i,r){i&1&&(_(0,_t,3,0,"button",1),s(1,"ul",2)(2,"li",3)(3,"a",4),m(4,"em",5),o()(),s(5,"li",6)(6,"a",7),m(7,"em",8),u(8," Enter Data"),o()(),s(9,"li",6)(10,"a",9),m(11,"em",10),u(12," View Data"),o()(),_(13,bt,4,0,"li",11)(14,yt,3,0,"li",11),o(),m(15,"router-outlet"),_(16,St,21,8,"ng-template",null,0,de)),i&2&&(l("ngIf",r.options.viewer),v(13),l("ngIf",r.service.actionAllowed("formEdit")),v(),l("ngIf",r.service.actionAllowed("formDelete")))},dependencies:[pe,I,K,X,Z,be,ye,Ce],encapsulation:2})}return t})(),Dt=(()=>{class t{service;router;route;config;auth;submission;renderOptions;onSuccess=new q;onError=new q;onSubmitDone=new q;constructor(e,i,r,n,c){this.service=e,this.router=i,this.route=r,this.config=n,this.auth=c,this.renderOptions={saveDraft:this.config.saveDraft},this.submission={data:{}}}ngOnInit(){this.service.formio=new M.Formio(this.service.formio.formUrl)}onSubmit(e){let i=e.state==="draft";this.submission.data=e.data,this.submission.state=i?e.state:"complete",this.service.formio.saveSubmission(this.submission).then(r=>{this.onSubmitDone.emit(r),this.onSuccess.emit(),this.router.navigate(["../","submission",r._id],{relativeTo:this.route})}).catch(r=>this.onError.emit(r))}static \u0275fac=function(i){return new(i||t)(a(C),a(x),a(y),a(V),a(ie))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"renderer","renderOptions","url","form","submission","success","submitDone","error","submit",4,"ngIf"],[3,"submit","renderer","renderOptions","url","form","submission","success","submitDone","error"]],template:function(i,r){i&1&&_(0,xt,1,8,"formio",0),i&2&&l("ngIf",r.service.form)},dependencies:[I,G],encapsulation:2})}return t})(),Vt=(()=>{class t{managerService;router;route;alerts;gridService;constructor(e,i,r,n,c){this.managerService=e,this.router=i,this.route=r,this.alerts=n,this.gridService=c}onDelete(){this.managerService.formio.deleteForm().then(()=>{if(this.gridService){let e=+localStorage.getItem("currentPage")||0;this.gridService.getFormsPerPage()===1&&e!==0&&localStorage.setItem("currentPage",`${e-1}`)}this.router.navigate(["../../"],{relativeTo:this.route})}).catch(e=>this.alerts.setAlert({type:"danger",message:e.message||e}))}onCancel(){this.router.navigate(["../","view"],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(a(C),a(x),a(y),a(N),a(xe))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:8,vars:1,consts:[[3,"alerts"],[1,"btn-toolbar"],["type","button",1,"btn","btn-danger",2,"margin-right","10px",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(i,r){i&1&&(m(0,"formio-alerts",0),s(1,"h3"),u(2,"Are you sure you wish to delete this form?"),o(),s(3,"div",1)(4,"button",2),f("click",function(){return r.onDelete()}),u(5,"Yes"),o(),s(6,"button",3),f("click",function(){return r.onCancel()}),u(7,"No"),o()()),i&2&&l("alerts",r.alerts)},dependencies:[R],encapsulation:2})}return t})(),jt=(()=>{class t{service;router;route;constructor(e,i,r){this.service=e,this.router=i,this.route=r}onSubmit(e){this.router.navigate(["../../"],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(a(C),a(x),a(y))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:1,vars:2,consts:[[3,"submit","formLoad","submissionLoad","renderer","src"]],template:function(i,r){i&1&&(s(0,"formio",0),f("submit",function(c){return r.onSubmit(c)})("formLoad",function(c){return r.service.setForm(c)})("submissionLoad",function(c){return r.service.submissionLoaded(c)}),o()),i&2&&l("renderer",r.service.config.renderer)("src",r.service.formio.submissionUrl)},dependencies:[G],encapsulation:2})}return t})(),Rt=(()=>{class t{service;router;route;alerts;constructor(e,i,r,n){this.service=e,this.router=i,this.route=r,this.alerts=n}onDelete(){this.service.formio.deleteSubmission().then(()=>{this.router.navigate(["../../"],{relativeTo:this.route})}).catch(e=>this.alerts.setAlert({type:"danger",message:e.message||e}))}onCancel(){this.router.navigate(["../","view"],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(a(C),a(x),a(y),a(N))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:8,vars:1,consts:[[3,"alerts"],[1,"btn-toolbar"],["type","button",1,"btn","btn-danger",2,"margin-right","10px",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(i,r){i&1&&(m(0,"formio-alerts",0),s(1,"h3"),u(2,"Are you sure you wish to delete this record?"),o(),s(3,"div",1)(4,"button",2),f("click",function(){return r.onDelete()}),u(5,"Yes"),o(),s(6,"button",3),f("click",function(){return r.onCancel()}),u(7,"No"),o()()),i&2&&l("alerts",r.alerts)},dependencies:[R],encapsulation:2})}return t})(),Lt=(()=>{class t{service;constructor(e){this.service=e}static \u0275fac=function(i){return new(i||t)(a(C))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:1,vars:3,consts:[[3,"formLoad","submissionLoad","renderer","src","readOnly"]],template:function(i,r){i&1&&(s(0,"formio",0),f("formLoad",function(c){return r.service.setForm(c)})("submissionLoad",function(c){return r.service.submissionLoaded(c)}),o()),i&2&&l("renderer",r.service.config.renderer)("src",r.service.formio.submissionUrl)("readOnly",!0)},dependencies:[G],encapsulation:2})}return t})(),Ut=(()=>{class t{service;route;router;constructor(e,i,r){this.service=e,this.route=i,this.router=r}onSelect(e){this.router.navigate([e._id,"view"],{relativeTo:this.route})}static \u0275fac=function(i){return new(i||t)(a(C),a(y),a(x))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"rowSelect","formio"]],template:function(i,r){i&1&&(s(0,"formio-grid",0),f("rowSelect",function(c){return r.onSelect(c)}),o()),i&2&&l("formio",r.service.formio)},dependencies:[U],encapsulation:2})}return t})(),Qt=(()=>{class t{service;route;downloadUrl;constructor(e,i){this.service=e,this.route=i}setDownloadUrl(e){this.downloadUrl=e}ngOnInit(){this.service.setSubmission(this.route).then(e=>{e.getDownloadUrl().then(i=>this.setDownloadUrl(i))})}static \u0275fac=function(i){return new(i||t)(a(C),a(y))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],decls:12,vars:3,consts:[["target","_blank","class","float-end",3,"href",4,"ngIf"],["aria-label","Submission","role","navigation",1,"nav","nav-tabs",2,"margin-bottom","10px"],[1,"nav-item"],["routerLink","../",1,"nav-link"],[1,"fa","fa-chevron-left","bi","bi-chevron-left"],["routerLinkActive","active",1,"nav-item"],["routerLink","view","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-eye","bi","bi-eye"],["class","nav-item","routerLinkActive","active",4,"ngIf"],["target","_blank",1,"float-end",3,"href"],["src","https://pro.formview.io/assets/pdf.png","alt","pdfImage",2,"height","2em"],["routerLink","edit","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-edit","bi","bi-pencil-square"],["routerLink","delete","routerLinkActive","active",1,"nav-link"],[1,"fa","fa-trash","bi","bi-trash"]],template:function(i,r){i&1&&(_(0,Ft,2,1,"a",0),s(1,"ul",1)(2,"li",2)(3,"a",3),m(4,"em",4),o()(),s(5,"li",5)(6,"a",6),m(7,"em",7),u(8," View"),o()(),_(9,It,4,0,"li",8)(10,Mt,3,0,"li",8),o(),m(11,"router-outlet")),i&2&&(l("ngIf",r.downloadUrl),v(9),l("ngIf",r.service.perms.edit),v(),l("ngIf",r.service.perms.delete))},dependencies:[I,K,X,Z],encapsulation:2})}return t})();function Le(t){return[{path:"",component:t&&t.formIndex?t.formIndex:kt},{path:"create",component:t&&t.formCreate?t.formCreate:At},{path:":id",component:t&&t.form?t.form:Tt,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:t&&t.formView?t.formView:Dt},{path:"edit",component:t&&t.formEdit?t.formEdit:Qe},{path:"delete",component:t&&t.formDelete?t.formDelete:Vt},{path:"submission",component:t&&t.submissionIndex?t.submissionIndex:Ut},{path:"submission/:id",component:t&&t.submission?t.submission:Qt,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:t&&t.submissionView?t.submissionView:Lt},{path:"edit",component:t&&t.submissionEdit?t.submissionEdit:jt},{path:"delete",component:t&&t.submissionDelete?t.submissionDelete:Rt}]}]}]}var ci=(()=>{class t{static forChild(e){return te(t,e,Le)}static forRoot(e){return te(t,e,Le)}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ce({type:t});static \u0275inj=ae({imports:[he,_e,ge,we,Fe,Me.forRoot(),Se.forRoot()]})}return t})();export{V as a,C as b,Qe as c,Dt as d,Vt as e,jt as f,Rt as g,Lt as h,Le as i,ci as j};
