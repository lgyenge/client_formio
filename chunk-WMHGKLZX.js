import{b as Be}from"./chunk-EBPMJSX6.js";import{A as me,B as ge,D as Ce,F as Fe,G as be,Ia as Pe,Ja as Ve,Jb as Ne,Sa as Me,U as xe,V as ce,Wa as He,Xa as Ue,Za as Ee,_a as je,ba as qe,d as $e,da as De,e as Ze,ga as he,ha as fe,ib as Se,la as Oe,va as ye,wa as ze,xb as _e}from"./chunk-5QQL34UD.js";var We=$e((Te,Le)=>{"use strict";(function(y,s){typeof define=="function"&&define.amd?define([],s):typeof Le=="object"&&typeof Te<"u"?Le.exports=s():y.Papa=s()})(Te,function y(){"use strict";var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},se=!s.document&&!!s.postMessage,u=s.IS_PAPA_WORKER||!1,f={},m=0,p={parse:function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(_(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!_(e.transform)&&e.transform,e.worker&&p.WORKERS_SUPPORTED){var r=function(){if(!p.WORKERS_SUPPORTED)return!1;var h=(D=s.URL||s.webkitURL||null,O=y.toString(),p.BLOB_URL||(p.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))),d=new s.Worker(h),D,O;return d.onmessage=J,d.id=m++,f[d.id]=d}();return r.userStep=e.step,r.userChunk=e.chunk,r.userComplete=e.complete,r.userError=e.error,e.step=_(e.step),e.chunk=_(e.chunk),e.complete=_(e.complete),e.error=_(e.error),delete e.worker,void r.postMessage({input:t,config:e,workerId:r.id})}var a=null;return p.NODE_STREAM_INPUT,typeof t=="string"?(t=function(h){return h.charCodeAt(0)===65279?h.slice(1):h}(t),a=e.download?new Y(e):new ne(e)):t.readable===!0&&_(t.read)&&_(t.on)?a=new ue(e):(s.File&&t instanceof File||t instanceof Object)&&(a=new re(e)),a.stream(t)},unparse:function(t,e){var i=!1,r=!0,a=",",h=`\r
`,d='"',D=d+d,O=!1,o=null,S=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||p.BAD_DELIMITERS.filter(function(n){return e.delimiter.indexOf(n)!==-1}).length||(a=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(O=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(d=e.quoteChar),typeof e.header=="boolean"&&(r=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");o=e.columns}e.escapeChar!==void 0&&(D=e.escapeChar+d),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(S=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var c=new RegExp(q(d),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return K(null,t,O);if(typeof t[0]=="object")return K(o||Object.keys(t[0]),t,O)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||o),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),K(t.fields||[],t.data||[],O);throw new Error("Unable to serialize unrecognized input");function K(n,w,V){var E="";typeof n=="string"&&(n=JSON.parse(n)),typeof w=="string"&&(w=JSON.parse(w));var z=Array.isArray(n)&&0<n.length,I=!Array.isArray(w[0]);if(z&&r){for(var F=0;F<n.length;F++)0<F&&(E+=a),E+=P(n[F],F);0<w.length&&(E+=h)}for(var l=0;l<w.length;l++){var g=z?n.length:w[l].length,C=!1,A=z?Object.keys(w[l]).length===0:w[l].length===0;if(V&&!z&&(C=V==="greedy"?w[l].join("").trim()==="":w[l].length===1&&w[l][0].length===0),V==="greedy"&&z){for(var k=[],M=0;M<g;M++){var T=I?n[M]:M;k.push(w[l][T])}C=k.join("").trim()===""}if(!C){for(var v=0;v<g;v++){0<v&&!A&&(E+=a);var G=z&&I?n[v]:v;E+=P(w[l][G],v)}l<w.length-1&&(!V||0<g&&!A)&&(E+=h)}}return E}function P(n,w){if(n==null)return"";if(n.constructor===Date)return JSON.stringify(n).slice(1,25);var V=!1;S&&typeof n=="string"&&S.test(n)&&(n="'"+n,V=!0);var E=n.toString().replace(c,D);return(V=V||i===!0||typeof i=="function"&&i(n,w)||Array.isArray(i)&&i[w]||function(z,I){for(var F=0;F<I.length;F++)if(-1<z.indexOf(I[F]))return!0;return!1}(E,p.BAD_DELIMITERS)||-1<E.indexOf(a)||E.charAt(0)===" "||E.charAt(E.length-1)===" ")?d+E+d:E}}};if(p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!se&&!!s.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=ae,p.ParserHandle=L,p.NetworkStreamer=Y,p.FileStreamer=re,p.StringStreamer=ne,p.ReadableStreamStreamer=ue,s.jQuery){var W=s.jQuery;W.fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(h){if(!(W(this).prop("tagName").toUpperCase()==="INPUT"&&W(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var d=0;d<this.files.length;d++)i.push({file:this.files[d],inputElem:this,instanceConfig:W.extend({},e)})}),r(),this;function r(){if(i.length!==0){var h,d,D,O,o=i[0];if(_(t.before)){var S=t.before(o.file,o.inputElem);if(typeof S=="object"){if(S.action==="abort")return h="AbortError",d=o.file,D=o.inputElem,O=S.reason,void(_(t.error)&&t.error({name:h},d,D,O));if(S.action==="skip")return void a();typeof S.config=="object"&&(o.instanceConfig=W.extend(o.instanceConfig,S.config))}else if(S==="skip")return void a()}var c=o.instanceConfig.complete;o.instanceConfig.complete=function(K){_(c)&&c(K,o.file,o.inputElem),a()},p.parse(o.file,o.instanceConfig)}else _(t.complete)&&t.complete()}function a(){i.splice(0,1),r()}}}function H(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=ve(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new L(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);r!==void 0&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var h=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var d=h.meta.cursor;this._finished||(this._partialLine=a.substring(d-this._baseIndex),this._baseIndex=d),h&&h.data&&(this._rowCount+=h.data.length);var D=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)s.postMessage({results:h,workerId:p.WORKER_ID,finished:D});else if(_(this._config.chunk)&&!i){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!D||!_(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):u&&this._config.error&&s.postMessage({workerId:p.WORKER_ID,error:e,finished:!1})}}function Y(t){var e;(t=t||{}).chunkSize||(t.chunkSize=p.RemoteChunkSize),H.call(this,t),this._nextChunk=se?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),se||(e.onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!se),this._config.downloadRequestHeaders){var i=this._config.downloadRequestHeaders;for(var r in i)e.setRequestHeader(r,i[r])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}se&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(i){var r=i.getResponseHeader("Content-Range");return r===null?-1:parseInt(r.substring(r.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){var r=e.statusText||i;this._sendError(new Error(r))}}function re(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=p.LocalChunkSize),H.call(this,t);var r=typeof FileReader<"u";this.stream=function(a){this._input=a,i=a.slice||a.webkitSlice||a.mozSlice,r?((e=new FileReader).onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var a=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);a=i.call(a,this._start,h)}var d=e.readAsText(a,this._config.encoding);r||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(a){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(a.target.result)},this._chunkError=function(){this._sendError(e.error)}}function ne(t){var e;H.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var i,r=this._config.chunkSize;return r?(i=e.substring(0,r),e=e.substring(r)):(i=e,e=""),this._finished=!e,this.parseChunk(i)}}}function ue(t){H.call(this,t=t||{});var e=[],i=!0,r=!1;this.pause=function(){H.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){H.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(a){this._input=a,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=X(function(a){try{e.push(typeof a=="string"?a:a.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=X(function(a){this._streamCleanUp(),this._sendError(a)},this),this._streamEnd=X(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(t){var e,i,r,a=Math.pow(2,53),h=-a,d=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,D=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,o=0,S=0,c=!1,K=!1,P=[],n={data:[],errors:[],meta:{}};if(_(t.step)){var w=t.step;t.step=function(l){if(n=l,z())E();else{if(E(),n.data.length===0)return;o+=l.data.length,t.preview&&o>t.preview?i.abort():(n.data=n.data[0],w(n,O))}}}function V(l){return t.skipEmptyLines==="greedy"?l.join("").trim()==="":l.length===1&&l[0].length===0}function E(){return n&&r&&(F("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(n.data=n.data.filter(function(l){return!V(l)})),z()&&function(){if(!n)return;function l(C,A){_(t.transformHeader)&&(C=t.transformHeader(C,A)),P.push(C)}if(Array.isArray(n.data[0])){for(var g=0;z()&&g<n.data.length;g++)n.data[g].forEach(l);n.data.splice(0,1)}else n.data.forEach(l)}(),function(){if(!n||!t.header&&!t.dynamicTyping&&!t.transform)return n;function l(C,A){var k,M=t.header?{}:[];for(k=0;k<C.length;k++){var T=k,v=C[k];t.header&&(T=k>=P.length?"__parsed_extra":P[k]),t.transform&&(v=t.transform(v,T)),v=I(T,v),T==="__parsed_extra"?(M[T]=M[T]||[],M[T].push(v)):M[T]=v}return t.header&&(k>P.length?F("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+k,S+A):k<P.length&&F("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+k,S+A)),M}var g=1;return!n.data.length||Array.isArray(n.data[0])?(n.data=n.data.map(l),g=n.data.length):n.data=l(n.data,0),t.header&&n.meta&&(n.meta.fields=P),S+=g,n}()}function z(){return t.header&&P.length===0}function I(l,g){return C=l,t.dynamicTypingFunction&&t.dynamicTyping[C]===void 0&&(t.dynamicTyping[C]=t.dynamicTypingFunction(C)),(t.dynamicTyping[C]||t.dynamicTyping)===!0?g==="true"||g==="TRUE"||g!=="false"&&g!=="FALSE"&&(function(A){if(d.test(A)){var k=parseFloat(A);if(h<k&&k<a)return!0}return!1}(g)?parseFloat(g):D.test(g)?new Date(g):g===""?null:g):g;var C}function F(l,g,C,A){var k={type:l,code:g,message:C};A!==void 0&&(k.row=A),n.errors.push(k)}this.parse=function(l,g,C){var A=t.quoteChar||'"';if(t.newline||(t.newline=function(T,v){T=T.substring(0,1048576);var G=new RegExp(q(v)+"([^]*?)"+q(v),"gm"),U=(T=T.replace(G,"")).split("\r"),Q=T.split(`
`),$=1<Q.length&&Q[0].length<U[0].length;if(U.length===1||$)return`
`;for(var j=0,x=0;x<U.length;x++)U[x][0]===`
`&&j++;return j>=U.length/2?`\r
`:"\r"}(l,A)),r=!1,t.delimiter)_(t.delimiter)&&(t.delimiter=t.delimiter(l),n.meta.delimiter=t.delimiter);else{var k=function(T,v,G,U,Q){var $,j,x,R;Q=Q||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var oe=0;oe<Q.length;oe++){var b=Q[oe],pe=0,Z=0,le=0;x=void 0;for(var ee=new ae({comments:U,delimiter:b,newline:v,preview:10}).parse(T),te=0;te<ee.data.length;te++)if(G&&V(ee.data[te]))le++;else{var ie=ee.data[te].length;Z+=ie,x!==void 0?0<ie&&(pe+=Math.abs(ie-x),x=ie):x=ie}0<ee.data.length&&(Z/=ee.data.length-le),(j===void 0||pe<=j)&&(R===void 0||R<Z)&&1.99<Z&&(j=pe,$=b,R=Z)}return{successful:!!(t.delimiter=$),bestDelimiter:$}}(l,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);k.successful?t.delimiter=k.bestDelimiter:(r=!0,t.delimiter=p.DefaultDelimiter),n.meta.delimiter=t.delimiter}var M=ve(t);return t.preview&&t.header&&M.preview++,e=l,i=new ae(M),n=i.parse(e,g,C),E(),c?{meta:{paused:!0}}:n||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,i.abort(),e=_(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){O.streamer._halted?(c=!1,O.streamer.parseChunk(e,!0)):setTimeout(O.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,i.abort(),n.meta.aborted=!0,_(t.complete)&&t.complete(n),e=""}}function q(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ae(t){var e,i=(t=t||{}).delimiter,r=t.newline,a=t.comments,h=t.step,d=t.preview,D=t.fastMode,O=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(O=t.escapeChar),(typeof i!="string"||-1<p.BAD_DELIMITERS.indexOf(i))&&(i=","),a===i)throw new Error("Comment character same as delimiter");a===!0?a="#":(typeof a!="string"||-1<p.BAD_DELIMITERS.indexOf(a))&&(a=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var o=0,S=!1;this.parse=function(c,K,P){if(typeof c!="string")throw new Error("Input must be a string");var n=c.length,w=i.length,V=r.length,E=a.length,z=_(h),I=[],F=[],l=[],g=o=0;if(!c)return N();if(t.header&&!K){var C=c.split(r)[0].split(i),A=[],k={},M=!1;for(var T in C){var v=C[T];_(t.transformHeader)&&(v=t.transformHeader(v,T));var G=v,U=k[v]||0;for(0<U&&(M=!0,G=v+"_"+U),k[v]=U+1;A.includes(G);)G=G+"_"+U;A.push(G)}if(M){var Q=c.split(r);Q[0]=A.join(i),c=Q.join(r)}}if(D||D!==!1&&c.indexOf(e)===-1){for(var $=c.split(r),j=0;j<$.length;j++){if(l=$[j],o+=l.length,j!==$.length-1)o+=r.length;else if(P)return N();if(!a||l.substring(0,E)!==a){if(z){if(I=[],le(l.split(i)),de(),S)return N()}else le(l.split(i));if(d&&d<=j)return I=I.slice(0,d),N(!0)}}return N()}for(var x=c.indexOf(i,o),R=c.indexOf(r,o),oe=new RegExp(q(O)+q(e),"g"),b=c.indexOf(e,o);;)if(c[o]!==e)if(a&&l.length===0&&c.substring(o,o+E)===a){if(R===-1)return N();o=R+V,R=c.indexOf(r,o),x=c.indexOf(i,o)}else if(x!==-1&&(x<R||R===-1))l.push(c.substring(o,x)),o=x+w,x=c.indexOf(i,o);else{if(R===-1)break;if(l.push(c.substring(o,R)),ie(R+V),z&&(de(),S))return N();if(d&&I.length>=d)return N(!0)}else for(b=o,o++;;){if((b=c.indexOf(e,b+1))===-1)return P||F.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:o}),te();if(b===n-1)return te(c.substring(o,b).replace(oe,e));if(e!==O||c[b+1]!==O){if(e===O||b===0||c[b-1]!==O){x!==-1&&x<b+1&&(x=c.indexOf(i,b+1)),R!==-1&&R<b+1&&(R=c.indexOf(r,b+1));var pe=ee(R===-1?x:Math.min(x,R));if(c.substr(b+1+pe,w)===i){l.push(c.substring(o,b).replace(oe,e)),c[o=b+1+pe+w]!==e&&(b=c.indexOf(e,o)),x=c.indexOf(i,o),R=c.indexOf(r,o);break}var Z=ee(R);if(c.substring(b+1+Z,b+1+Z+V)===r){if(l.push(c.substring(o,b).replace(oe,e)),ie(b+1+Z+V),x=c.indexOf(i,o),b=c.indexOf(e,o),z&&(de(),S))return N();if(d&&I.length>=d)return N(!0);break}F.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:o}),b++}}else b++}return te();function le(B){I.push(B),g=o}function ee(B){var Ie=0;if(B!==-1){var we=c.substring(b+1,B);we&&we.trim()===""&&(Ie=we.length)}return Ie}function te(B){return P||(B===void 0&&(B=c.substring(o)),l.push(B),o=n,le(l),z&&de()),N()}function ie(B){o=B,le(l),l=[],R=c.indexOf(r,o)}function N(B){return{data:I,errors:F,meta:{delimiter:i,linebreak:r,aborted:S,truncated:!!B,cursor:g+(K||0)}}}function de(){h(N()),I=[],F=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return o}}function J(t){var e=t.data,i=f[e.workerId],r=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var a={abort:function(){r=!0,Re(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Ae,resume:Ae};if(_(i.userStep)){for(var h=0;h<e.results.data.length&&(i.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},a),!r);h++);delete e.results}else _(i.userChunk)&&(i.userChunk(e.results,a,e.file),delete e.results)}e.finished&&!r&&Re(e.workerId,e.results)}function Re(t,e){var i=f[t];_(i.userComplete)&&i.userComplete(e),i.terminate(),delete f[t]}function Ae(){throw new Error("Not implemented.")}function ve(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=ve(t[i]);return e}function X(t,e){return function(){t.apply(e,arguments)}}function _(t){return typeof t=="function"}return u&&(s.onmessage=function(t){var e=t.data;if(p.WORKER_ID===void 0&&e&&(p.WORKER_ID=e.workerId),typeof e.input=="string")s.postMessage({workerId:p.WORKER_ID,results:p.parse(e.input,e.config),finished:!0});else if(s.File&&e.input instanceof File||e.input instanceof Object){var i=p.parse(e.input,e.config);i&&s.postMessage({workerId:p.WORKER_ID,results:i,finished:!0})}}),(Y.prototype=Object.create(H.prototype)).constructor=Y,(re.prototype=Object.create(H.prototype)).constructor=re,(ne.prototype=Object.create(ne.prototype)).constructor=ne,(ue.prototype=Object.create(H.prototype)).constructor=ue,p})});var Ye=Ze(We(),1),Ke=(()=>{let s=class s{constructor(){this._papa=Ye}parse(u,f){return this._papa.parse(u,f)}unparse(u,f){return this._papa.unparse(u,f)}setLocalChunkSize(u){this._papa.LocalChunkSize=u}setRemoteChunkSize(u){this._papa.RemoteChunkSize=u}setDefaultDelimiter(u){this._papa.DefaultDelimiter=u}get badDelimiters(){return this._papa.BAD_DELIMITERS}get recordSeparator(){return this._papa.RECORD_SEP}get unitSeparator(){return this._papa.UNIT_SEP}get workersSupported(){return this._papa.WORKERS_SUPPORTED}};s.\u0275fac=function(f){return new(f||s)},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"root"});let y=s;return y})();var Ge=(()=>{let s=class s{constructor(u,f){this.appConfig=u,this.http=f}authentuicate(){let u=this.appConfig.appUrl+"/user/login",f={data:{email:"admin@example.com",password:"CHANGEME"}},m=new Ee({"Content-Type":"application/json"});return this.http.post(u,f,{headers:m})}uploadForm(u){let f=this.appConfig.appUrl+"/form",m=localStorage.getItem("formioToken")||"",p={title:"151-0111-6525-2 (Acetabular Fixation Screw D:6,5 L:25)",name:"151-0111-6525-2",path:"151-0111-6525-2",type:"form",display:"wizard",tags:["csavar","common"],submissionAccess:[{type:"create_all",roles:[]},{type:"read_all",roles:[]},{type:"update_all",roles:[]},{type:"delete_all",roles:[]},{type:"create_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"read_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"update_own",roles:["660e4fcbe958c6dc4f0534cb"]},{type:"delete_own",roles:["660e4fcbe958c6dc4f0534cb"]}],owner:"660e4fcbe958c6dc4f05350d",components:[{type:"panel",title:"Page 1",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page1Columns",columns:[{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Cikksz\xE1m",key:"page1ColumnsCikkszm",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Sarzs",key:"page1ColumnsSarzs",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!0,inputType:"text",inputMask:"",label:"Megnevez\xE9s",key:"page1ColumnsMegnevezs",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"",protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,spellcheck:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1},conditional:{show:"",when:null,eq:""},type:"textfield",labelPosition:"top",inputFormat:"plain",tags:[],properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!0,label:"V\xE9gellen\u0151rz\xE9s (ok/nok)",dataGridLabel:!1,key:"page1Vgellenrzsoknok",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{input:!0,tableView:!0,label:"Signature",key:"page1Signature",placeholder:"",footer:"Al\xE1\xEDr\xE1s",width:"100%",height:"150px",penColor:"black",backgroundColor:"rgb(245,245,235)",minWidth:"0.5",maxWidth:"2.5",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1},type:"signature",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page1",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{type:"panel",title:"Page 2",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page2Columns",columns:[{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD87,688 (+0,05/0)",key:"page2Columns76880050",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD86,5 (0/-0,1)",key:"page2Columns65001",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"SW 3,5 ellen\u0151rz\xE9s",dataGridLabel:!1,key:"page2ColumnsSw35Ellenrzs",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD85,115 (+0,05/0)",key:"page2Columns51150050",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"3 (+/-0,1)",key:"page2Columns301",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Fel\xFClet (szemcseszort)",dataGridLabel:!1,key:"page2ColumnsFelletszemcseszort",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"\xD83 (0/-0,1)",key:"page2Columns3001",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,tableView:!1,inputType:"number",label:"25 (+/-0,2)",key:"page2Columns2502",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,persistent:!0,hidden:!1,clearOnHide:!0,validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""},type:"number",labelPosition:"top",tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page2",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{type:"panel",title:"Page 3",components:[{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"page3Columns",columns:[{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Bioburden vizsg\xE1lat (\u226510 CFU)",dataGridLabel:!1,key:"page3ColumnsBioburdenvizsglat10Cfu",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Bakteri\xE1lis endotoxin vizsg\xE1lat (\u226520 EU)",dataGridLabel:!1,key:"page3ColumnsBakterilisendotoxinvizsglat20Eu",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Sterilit\xE1s vizsg\xE1lat (steril/nem steril)",dataGridLabel:!1,key:"page3ColumnsSterilitsvizsglatsterilnemsteril",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0},{components:[{autofocus:!1,input:!0,inputType:"checkbox",tableView:!1,label:"Csomagol\xE1s-z\xE1r\xE1s vizsg\xE1lat (ok/nok)",dataGridLabel:!1,key:"page3ColumnsCsomagolsZrsvizsglatoknok",defaultValue:!1,protected:!1,persistent:!0,hidden:!1,name:"",value:"",clearOnHide:!0,validate:{required:!1},type:"checkbox",labelPosition:"right",hideLabel:!1,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}}],input:!1,key:"page3",clearOnHide:!1,theme:"default",tableView:!1,hideLabel:!1},{clearOnHide:!1,label:"Columns",input:!1,tableView:!1,key:"columns",columns:[{components:[],width:4,offset:0,push:0,pull:0},{components:[],width:4,offset:0,push:0,pull:0},{components:[],width:4,offset:0,push:0,pull:0}],type:"columns",hideLabel:!0,tags:[],conditional:{show:"",when:null,eq:""},properties:{}},{autofocus:!1,input:!0,label:"Submit",tableView:!1,key:"submit",size:"md",leftIcon:"",rightIcon:"",block:!1,action:"submit",disableOnInvalid:!1,theme:"primary",type:"button"}]},W=new Ee({"Content-Type":"application/json","x-jwt-token":m});return this.http.post(f,u,{headers:W})}};s.\u0275fac=function(f){return new(f||s)(Ce(_e),Ce(je))},s.\u0275prov=me({token:s,factory:s.\u0275fac,providedIn:"root"});let y=s;return y})();function it(y,s){if(y&1&&(he(0,"div"),ye(1),Pe(2,"json"),fe()),y&2){let se=s.$implicit;xe(),ze(Ve(2,1,se))}}var Qe=(()=>{let s=class s{constructor(u,f,m,p){this.appConfig=u,this.papa=f,this.upload=m,this.auth=p,this.file="",this.importedData=[],this.roles=[],this.accessSetting={type:"read_all",roles:[]},this.accessSubmissionCreateAll={type:"create_all",roles:[]},this.accessSubmissionReadAll={type:"read_all",roles:[]},this.accessSubmissionUpdateAll={type:"update_all",roles:[]},this.accessSubmissionDeleteAll={type:"delete_all",roles:[]},this.accessSubmissionCreateOwn={type:"create_own",roles:[]},this.accessSubmissionReadOwn={type:"read_own",roles:[]},this.accessSubmissionUpdateOwn={type:"update_own",roles:[]},this.accessSubmissionDeleteOwn={type:"delete_own",roles:[]}}ngOnInit(){let u=this;this.auth.ready.then(()=>{this.roles.push(this.auth.roles.administrator._id),this.roles.push(this.auth.roles.authenticated._id),this.roles.push(this.auth.roles.anonymous._id),this.accessSetting.roles=this.roles,this.accessSubmissionReadAll.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionCreateOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionReadOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionUpdateOwn.roles.push(this.auth.roles.authenticated._id),this.accessSubmissionDeleteOwn.roles.push(this.auth.roles.authenticated._id)})}uploadForm(){console.log(this.dataList),this.dataList.forEach(u=>{this.formToUpload=this.generateForm(u),console.log(this.formToUpload),this.upload.uploadForm(this.formToUpload).subscribe(f=>{})})}readCsvFromLocal(u){let f=u.srcElement.files;this.parseCsvFile(f[0])}parseCsvFile(u){this.papa.parse(u,{header:!0,dynamicTyping:!0,skipEmptyLines:"greedy",worker:!0,complete:(f,m)=>{this.papaParseComplete(f)}})}papaParseComplete(u){this.dataList=u.data}generateForm(u){let f="",m={title:"",display:"form",type:"form",name:"",path:"",tags:["common"],components:[],access:[],submissionAccess:[]},p={type:"button",action:"submit",label:"Submit",theme:"primary"},W={label:"lot",widget:"choicesjs",tableView:!0,dataSrc:"resource",data:{resource:Be.lotId},valueProperty:"data.lot",template:"<span>{{ item.data.lot }}</span>",validateWhenHidden:!1,key:"lot1",type:"select",searchField:"data.lot__regex",noRefreshOnScroll:!1,addResource:!1,reference:!1,input:!0},H=ue("user");H.customDefaultValue="value = user.data.email;",H.disabled=!0,m.name=u.Cikksz\u00E1m+f,m.title=u.Cikksz\u00E1m+" ("+u.Megnevez\u00E9s+")",m.path=u.Cikksz\u00E1m+f,m.components?.push(H),m.components?.push(W);let Y=re("serial","","serial");Y.label="serial",Y.key="serial",m.components?.push(Y);for(let L=0;L<Object.keys(u).length/3;L++)if(u["Tp-"+L]=="n"){let q=re(u["Par-"+L],u["Tr-"+L],L);m.components?.push(q)}else if(u["Tp-"+L]=="b"){let q=ne(u["Par-"+L],u["Tr-"+L],L);m.components?.push(q)}return m.components?.push(p),m.access?.push(this.accessSetting),m.submissionAccess?.push(this.accessSubmissionCreateAll),m.submissionAccess?.push(this.accessSubmissionReadAll),m.submissionAccess?.push(this.accessSubmissionUpdateAll),m.submissionAccess?.push(this.accessSubmissionDeleteAll),m.submissionAccess?.push(this.accessSubmissionCreateOwn),m.submissionAccess?.push(this.accessSubmissionReadOwn),m.submissionAccess?.push(this.accessSubmissionUpdateOwn),m.submissionAccess?.push(this.accessSubmissionDeleteOwn),m;function re(L,q,ae){var J={input:!0,tableView:!0,inputType:"number",inputMask:"",label:"First Name",key:"firstName",placeholder:"",prefix:"",suffix:"",defaultValue:"",protected:!1,unique:!1,persistent:!0,validate:{required:!1,minLength:0,maxLength:50,pattern:"",custom:"",customPrivate:!1},conditional:{show:!1,when:"",eq:""},type:"number",tags:[],lockKey:!0,isNew:!1};return J.label=L+"("+q+")",J.key="par"+ae,J}function ne(L,q,ae){var J={label:"Checkbox",tableView:!0,key:"checkbox",type:"checkbox",input:!0};return J.label=L+"("+q+")",J.key="par"+ae,J}function ue(L){var q={type:"textfield",label:"",key:"",input:!0,hidden:!1,disabled:!1,customDefaultValue:""};return q.label=L,q.key=L,q}}};s.\u0275fac=function(f){return new(f||s)(ce(_e),ce(Ke),ce(Ge),ce(Ne))},s.\u0275cmp=Fe({type:s,selectors:[["app-upload"]],decls:6,vars:1,consts:[["type","file","accept",".csv",1,"form-control",3,"change"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(f,m){f&1&&(he(0,"input",0),Oe("change",function(W){return m.readCsvFromLocal(W)}),fe(),he(1,"button",1),Oe("click",function(){return m.uploadForm()}),ye(2,"Upload Form"),fe(),he(3,"div"),ye(4,"data from csv"),fe(),qe(5,it,3,3,"div",2)),f&2&&(xe(5),De("ngForOf",m.dataList))},dependencies:[Me,He]});let y=s;return y})();var st=[{path:"",component:Qe}],Je=(()=>{let s=class s{};s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=be({type:s}),s.\u0275inj=ge({imports:[Se.forChild(st),Se]});let y=s;return y})();var bt=(()=>{let s=class s{};s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=be({type:s}),s.\u0275inj=ge({imports:[Ue,Je]});let y=s;return y})();export{bt as UploadModule};
